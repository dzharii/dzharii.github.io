<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Dmytro Zharii RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Dmytro Zharii Atom Feed">
<link rel="stylesheet" href="/clippy.js/clippy.css">
<script src="/clippy.js/jquery-3.6.0.min.js"></script>
<script src="/clippy.js/clippy.js"></script><title data-react-helmet="true">Links from my inbox 2025-09-29 | Dmytro Zharii</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://blog.zharii.com/blog/2025/09/29/links-from-my-inbox"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Links from my inbox 2025-09-29 | Dmytro Zharii"><meta data-react-helmet="true" name="description" content="⌚ Nice watch!"><meta data-react-helmet="true" property="og:description" content="⌚ Nice watch!"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2025-09-29T19:42:00.000Z"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.zharii.com/blog/2025/09/29/links-from-my-inbox"><link data-react-helmet="true" rel="alternate" href="https://blog.zharii.com/blog/2025/09/29/links-from-my-inbox" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.zharii.com/blog/2025/09/29/links-from-my-inbox" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.73058418.css">
<link rel="preload" href="/assets/js/runtime~main.e9d5ee50.js" as="script">
<link rel="preload" href="/assets/js/main.413c250e.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_t6R9">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_ixIS themedImage--light_oE8D"><img src="/img/favicon.ico" alt="My Site Logo" class="themedImage_ixIS themedImage--dark_Pcj1"></div><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link" href="/docs/intro">Personal Wiki</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://blog.zharii.com/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">[RSS]</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/dzharii/dzharii.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ENIg"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_BOl1 toggle_D9iD toggleDisabled_z3Bs"><div class="toggleTrack_RGsh" role="button" tabindex="-1"><div class="toggleTrackCheck_G703"><span class="toggleIcon_YjN9">🌜</span></div><div class="toggleTrackX_bXpe"><span class="toggleIcon_YjN9">🌞</span></div><div class="toggleTrackThumb_Hv7O"></div></div><input type="checkbox" class="toggleScreenReader_8nUd" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_cky7 thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_kV5z margin-bottom--md">All posts</div><ul class="sidebarItemList_jEDs"><li class="sidebarItem_WHeT"><a aria-current="page" class="sidebarItemLink_zwXA sidebarItemLinkActive_Co6M" href="/blog/2025/09/29/links-from-my-inbox">Links from my inbox 2025-09-29</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/08/31/links-from-my-inbox">Links from my inbox 2025-08-31</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/08/04/links-from-my-inbox">Links from my inbox 2025-08-04</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/07/06/links-from-my-inbox">Links from my inbox 2025-07-06</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/06/09/links-from-my-inbox">Links from my inbox 2025-06-09</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/05/28/links-from-my-inbox">Links from my inbox 2025-05-28</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/04/06/links-from-my-inbox">Links from my inbox 2025-04-06</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/03/09/links-from-my-inbox">Links from my inbox 2025-03-09</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/02/22/links-from-my-inbox">Links from my inbox 2025-02-22</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2025/01/20/links-from-my-inbox">Links from my inbox 2025-01-20</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/12/29/links-from-my-inbox">Links from my inbox 2024-12-29</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/12/15/links-from-my-inbox">Links from my inbox 2024-12-15</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/12/01/links-from-my-inbox">Links from my inbox 2024-12-01</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/11/24/links-from-my-inbox">Links from my inbox 2024-11-24</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/11/16/links-from-my-inbox">Links from my inbox 2024-11-16</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/10/13/links-from-my-inbox">Links from my inbox 2024-10-13</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/09/15/links-from-my-inbox">Links from my inbox 2024-09-15</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/09/01/links-from-my-inbox">Links from my inbox 2024-09-01</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/08/30/links-from-my-inbox">Links from my inbox 2024-08-30</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/08/25/links-from-my-inbox">Links from my inbox 2024-08-25</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/08/06/links-from-my-inbox">Links from my inbox 2024-08-06</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/06/09/links-from-my-inbox">Links from my inbox 2024-06-09</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/03/25/links-from-my-inbox">Links from my inbox 2024-03-25</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/02/24/links-from-my-inbox">Links from my inbox 2024-02-24</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/02/08/links-from-my-inbox">Links from my inbox 2024-02-08</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2024/01/25/links-from-my-inbox">Links from my inbox 2024-01-25</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/12/25/links-from-my-inbox">Links from my inbox 2023-12-25</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/12/15/links-from-my-inbox">Links from my inbox 2023-12-15</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/11/03/links-from-my-inbox">Links from my inbox 2023-11-03</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/11/02/links-from-my-inbox">Links from my inbox 2023-11-02</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/10/03/links-from-my-inbox">Links from my inbox 2023-10-03</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/09/24/links-from-my-inbox">Links from my inbox 2023-09-24</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/08/13/links-from-my-inbox">Links from my inbox 2023-08-13</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/08/05/links-from-my-inbox">Links from my inbox... TELEGRAM O_O and Roma 2023-08-05</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/08/04/links-from-my-inbox">Links from my inbox 2023-08-04</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/08/01/links-from-my-inbox">Links from my inbox 2023-08-01</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/06/28/links-from-my-inbox">Links from my inbox 2023-06-28</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/06/08/links-from-my-inbox">Links from my inbox 2023-06-08</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/05/28/links-from-my-inbox">Links from my inbox 2023-05-28</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/05/21/links-from-my-inbox">Links from my inbox 2023-05-21</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/05/19/links-from-my-inbox">Links from my inbox 2023-05-19</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/04/13/links-from-my-inbox">Links from my inbox 2023-04-13</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/03/25/links-from-my-inbox">Links from my inbox 2023-03-25</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/03/11/links-from-my-inbox">Links from my inbox 2023-03-11</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/02/22/links-from-my-inbox">Links from my inbox 2023-02-22</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/02/12/links-from-my-inbox">Links from my inbox 2023-02-12</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2023/02/02/links-from-my-inbox">Links from my inbox 2023-02-02</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/12/28/links-from-my-inbox">Links from my inbox 2022-12-28</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/12/14/links-from-my-inbox">Links from my inbox 2022-12-14</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/12/03/links-from-my-inbox">Links from my inbox 2022-12-03</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/11/27/links-from-my-inbox">Links from my inbox 2022-11-27</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/11/20/links-from-my-inbox">Links from my inbox November 20 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/11/13/links-from-my-inbox">Links from my inbox November 13 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/11/07/links-from-my-inbox-november-2022">Links from my inbox November 07 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/10/07/links-from-my-inbox-october-2022">Links from my inbox October 04 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/09/18/links-from-my-inbox-september-2022">Links from my inbox September 18 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/08/06/links-from-my-inbox-august-2022">Links from my inbox August 06 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/07/22/links-from-my-inbox-july-2022">Links from my inbox July 22 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/06/18/links-from-my-inbox-june-2022">Links from my inbox June 18 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/05/22/links-from-my-inbox-may-2022-part2">Links from my inbox May 22 2022 Part 2</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/05/21/links-from-my-inbox-may-2022">Links from my inbox May 21 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/04/19/links-from-my-inbox-april-2022">Links from my inbox April 13 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/03/19/links-from-my-inbox-march2">Links from my inbox March 13 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2022/03/04/links-from-my-inbox-march">Links from my inbox March 2022</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/12/26/links-from-my-inbox-december-2021">Links from my inbox December 2021</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/11/14/links-from-my-inbox-november-2021">Links from my inbox November 2021</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/10/13/favorite-vs-code-extensions">My Favorite VS Code Extensions</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/10/09/productivity-products">Productivity products</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/10/09/projects-and-tools">Projects and Tools</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/10/03/links-from-my-inbox-october-2021">Links from my inbox October 2021</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/09/26/clean-my-inbox-september-2021">Links from my inbox September 2021</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/09/26/good-reads-2021">Good reads! Best of the best!</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/08/03/links-from-my-inbox-august-2021">Links from my inbox August 2021</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/08/03/seattle">Seattle</a></li><li class="sidebarItem_WHeT"><a class="sidebarItemLink_zwXA" href="/blog/2021/07/25/lets-rock">Let&#x27;s rock!</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rv6G" itemprop="headline">Links from my inbox 2025-09-29</h1><div class="blogPostData_XcAt margin-vert--md"><time datetime="2025-09-29T19:42:00.000Z" itemprop="datePublished">September 29, 2025</time> · <!-- -->24 min read</div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_DXrL" id="-nice-watch">⌚ Nice watch!<a class="hash-link" href="#-nice-watch" title="Direct link to heading">​</a></h2><p>2025-09-17 <a href="https://www.youtube.com/watch?v=NxiKlnUtyio" target="_blank" rel="noopener noreferrer">Sam H. Smith – Parsing without ASTs and Optimizing with Sea of Nodes – BSC 2025 - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250916232906913" src="/assets/images/image-20250916232906913-7d494ca0a761bc7a4e93e865af48ba32.png" width="1365" height="746"></p></blockquote><p><strong>Summary</strong></p><ul><li>Prefer simple, fast tokenization with a cached peek and a rewindable savepoint instead of building token arrays or trees. See Tiny C Compiler’s one-pass design for inspiration: <a href="https://bellard.org/tcc/tcc-doc.html" target="_blank" rel="noopener noreferrer">Tiny C Compiler documentation</a>.</li><li>Parse expressions without an AST using a right-recursive, precedence-aware function that sometimes returns early when the parent operator has higher precedence. This is equivalent in spirit to Pratt or precedence-climbing parsing. A clear tutorial: <a href="https://matklad.github.io/2020/04/13/simple-but-powerful-pratt-parsing.html" target="_blank" rel="noopener noreferrer">Simple but Powerful Pratt Parsing</a>.</li><li>When a later token retroactively changes meaning, rewind to a saved scanner position and re-parse with the new mode rather than maintaining an AST.</li><li>Start with a trivial linear IR using value numbers and stack slots so you can get codegen working early.</li><li>Treat variables as stack addresses in the naive IR, but in the optimized pipeline treat variables as names bound to prior computations, not places in memory.</li><li>Generate control flow with simple labels and conditional branches, then add else, while, and defer by re-parsing the relevant scopes from savepoints to emit the missing pieces.</li><li>Inline small functions by jumping to the callee’s source, parsing it as a scope, and treating a return as a jump to the end of the inlined region.</li><li>Move to a Sea-of-Nodes SSA graph as the optimization IR so that constant folding, CSE, and reordering fall out of local rewrites. Overview and history: <a href="https://en.wikipedia.org/wiki/Sea_of_nodes" target="_blank" rel="noopener noreferrer">Sea of nodes on Wikipedia</a> and Cliff Click’s slide deck: <a href="https://assets.ctfassets.net/oxjq45e8ilak/12JQgkvXnnXcPoAGoxB6le/5481932e755600401d607e20345d81d4/100752_1543361625_Cliff_Click_The_Sea_of_Nodes_and_the_HotSpot_JIT.pdf" target="_blank" rel="noopener noreferrer">The Sea of Nodes and the HotSpot JIT</a>.</li><li>Hash-cons nodes to deduplicate identical subgraphs and attach temporary keep-alive pins while constructing; remove pins to let unused nodes free. A hands-on reference implementation: <a href="https://github.com/SeaOfNodes/Simple" target="_blank" rel="noopener noreferrer">SeaOfNodes/Simple</a>.</li><li>Represent control with If nodes that produce projections, merge with Region nodes, and merge values with Phi nodes. A compact SSA primer: <a href="https://en.wikipedia.org/wiki/Static_single-assignment_form" target="_blank" rel="noopener noreferrer">Static single-assignment form</a> and LLVM PHI example: <a href="https://mapping-high-level-constructs-to-llvm-ir.readthedocs.io/en/latest/control-structures/ssa-phi.html" target="_blank" rel="noopener noreferrer">SSA and PHI in LLVM IR</a>.</li><li>Convert the Sea-of-Nodes graph back to a CFG using Global Code Motion; then eliminate Phi by inserting edge moves. Foundational paper: <a href="https://courses.cs.washington.edu/courses/cse501/06wi/reading/click-pldi95.pdf" target="_blank" rel="noopener noreferrer">Global Code Motion / Global Value Numbering</a>.</li><li>Build a dominator tree and schedule late to avoid hoisting constants and work into hot blocks. A modern overview of SSA placement and related algorithms: <a href="https://bernsteinbear.com/blog/ssa/" target="_blank" rel="noopener noreferrer">A catalog of ways to generate SSA</a>.</li><li>Prefer local peephole rewrites applied continuously as you build the graph; ensure the rewrite set is confluent enough to terminate. A readable walkthrough with code and GCM illustrations: <a href="https://darksi.de/d.sea-of-nodes/" target="_blank" rel="noopener noreferrer">Sea of Nodes by Fedor Indutny</a>.</li><li>Keep memory effects simple at first by modeling loads, stores, and calls on a single control chain; only add memory dependence graphs once everything else is stable.</li><li>For debug info, insert special debug nodes that capture in-scope values at control points so later scheduling and register allocation can still recover variable locations.</li><li>Expect tokenizer speed to matter when you rely on rewinds; invest in fast scanning and cached peek results.</li><li>In language design, favor unique top-level keywords so you can pre-scan files, discover declarations, and compile procedure bodies in parallel.</li><li>Recognize limits and tradeoffs. One-pass compilers are fast but produce naive code without a strong optimizing IR; see the discussion and TCC’s own docs: <a href="https://stackoverflow.com/questions/7951854/do-one-pass-compilers-still-exist" target="_blank" rel="noopener noreferrer">Do one-pass compilers still exist</a> and <a href="https://bellard.org/tcc/tcc-doc.html" target="_blank" rel="noopener noreferrer">Tiny C Compiler documentation</a>.</li><li>Know the current landscape. Sea-of-Nodes is widely used, but some engines have moved away for language-specific reasons; see V8’s 2025 write-up: <a href="https://v8.dev/blog/leaving-the-sea-of-nodes" target="_blank" rel="noopener noreferrer">Land ahoy: leaving the Sea of Nodes</a>.</li></ul><p><strong>Minimal tokenizer with peek, consume, and rewind</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> src</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// start of file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// current byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Token cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// last peeked token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bool has_cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> Scanner</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> bool has_cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> Token cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> Savepoint</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Token </span><span class="token function" style="color:#d73a49">peek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">has_cached</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cached </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">scan_one_token</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// returns enum + slice/span</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">has_cached </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Token </span><span class="token function" style="color:#d73a49">consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Token t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">peek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// advance by span</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">has_cached </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Savepoint </span><span class="token function" style="color:#d73a49">mark</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Savepoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">has_cached</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cached </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rewind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Savepoint sp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">has_cached </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">has_cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> S</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">cached </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cached</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Expression parsing without an AST, with early return on higher-precedence parent</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// precedence: larger = binds tighter. e.g., &#x27;*&#x27; &gt; &#x27;+&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">prec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TokenKind op</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bool </span><span class="token function" style="color:#d73a49">parse_expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> parent_prec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Value</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// parse a primary or unary, then loop binary ops of &gt;= parent_prec</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bool </span><span class="token function" style="color:#d73a49">parse_expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Scanner</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> parent_prec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Value</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Value lhs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">parse_unary_or_primary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Token op </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">peek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">is_binary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">op</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> myp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">prec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">op</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myp </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> parent_prec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// go-left-sometimes: return to parent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// eat operator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Value rhs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">parse_expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> myp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">rhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lhs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">emit_binop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">op</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// compute or build IR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> lhs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Rewind on forward knowledge</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">Savepoint sp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mark</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Value v</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bool ok </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parse_expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ok </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">peek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kind </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> TOK_DOLLAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">rewind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">set_mode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EXPR_MODE_DOLLAR_PLUS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// switch semantics</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ok </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parse_expr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">scanner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// re-parse</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Toy linear IR with value numbers and stack slots</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// vN are SSA-like value numbers, but we spill everything initially.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v_lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">int64_t</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// emit literal -&gt; v#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v_addr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">StackSlot s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// address-of a local -&gt; v#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v_load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v_addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// load [v_addr] -&gt; v#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v_store</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v_addr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v_val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// store v_val -&gt; [v_addr]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">br_eqz</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v_cond</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Label target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Phi and region construction at a merge</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> then_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">build_then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// returns value number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> else_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">build_else</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region r </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new_region</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> phi_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new_phi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> then_x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> else_x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// SSA merge point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">bind_var</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">env</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;x&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> phi_x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Global code motion back to a CFG and Phi removal</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// For each block that flows into region R with phi v = phi(a from B1, b from B2):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// insert edge moves at end of predecessors, then kill phi.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">emit_in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mov v &lt;- a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">emit_in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mov v &lt;- b&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">remove_phi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">R</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>Local peephole rules to run during graph build</strong></p><div class="codeBlockContainer_aLwb language-c theme-code-block"><div class="codeBlockContent_INfL c"><pre tabindex="0" class="prism-code language-c codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Commutativity and constant folding</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">is_const</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token function" style="color:#d73a49">is_const</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">k2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">k1</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">k2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Strength reductions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rule </span><span class="token function" style="color:#d73a49">mul</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p><strong>What to watch out for</strong></p><ul><li>Tokenizer performance matters because you will peek and rewind frequently.</li><li>Ensure your rewrite set terminates; run to a fixed point in release builds and assert progress stops.</li><li>Keep memory ordering strict at first by threading loads, stores, and calls on the control chain; only then add memory dependence edges.</li><li>Dominance and latest safe placement are key for late scheduling; compute the dominator tree over the finalized CFG and sink work accordingly. Background: <a href="https://en.wikipedia.org/wiki/Code_motion" target="_blank" rel="noopener noreferrer">Code motion</a>.</li><li>Sea-of-Nodes is powerful but not universal; language and runtime constraints may push you toward different IRs, as V8 discusses here: <a href="https://v8.dev/blog/leaving-the-sea-of-nodes" target="_blank" rel="noopener noreferrer">Land ahoy: leaving the Sea of Nodes</a>.</li></ul><p><strong>Further references the talk alluded to</strong></p><ul><li>Cliff Click’s original papers and tutorial repos: <a href="https://github.com/SeaOfNodes" target="_blank" rel="noopener noreferrer">SeaOfNodes GitHub organization</a> and his PLDI paper: <a href="https://courses.cs.washington.edu/courses/cse501/06wi/reading/click-pldi95.pdf" target="_blank" rel="noopener noreferrer">Global Code Motion / GVN</a>.</li><li>Background on operator-precedence and Pratt parsing families: <a href="https://en.wikipedia.org/wiki/Operator-precedence_parser" target="_blank" rel="noopener noreferrer">Operator-precedence parser</a>.</li><li>Short SSA and PHI refreshers: <a href="https://en.wikipedia.org/wiki/Static_single-assignment_form" target="_blank" rel="noopener noreferrer">Static single-assignment form</a> and <a href="https://mapping-high-level-constructs-to-llvm-ir.readthedocs.io/en/latest/control-structures/ssa-phi.html" target="_blank" rel="noopener noreferrer">SSA and PHI in LLVM IR</a>.</li><li>Context on one-pass compilers and tradeoffs: <a href="https://bellard.org/tcc/tcc-doc.html" target="_blank" rel="noopener noreferrer">Tiny C Compiler documentation</a> and discussion: <a href="https://stackoverflow.com/questions/7951854/do-one-pass-compilers-still-exist" target="_blank" rel="noopener noreferrer">Do one-pass compilers still exist</a>.</li></ul><p><strong>Bottom line</strong></p><ul><li>Parse without trees using a fast scanner, precedence-aware recursion, and savepoints.</li><li>Get a simple linear IR running, then switch to a Sea-of-Nodes SSA graph with hash-consing and continuous peephole rewrites.</li><li>Reconstruct a CFG via Global Code Motion, eliminate Phi with edge moves, and schedule late using a dominator tree.</li><li>Keep memory simple first; add sophistication only when the rest is solid.</li><li>Prefer local, incremental rewrites and measure.</li></ul><p>2025-09-03 <a href="https://www.youtube.com/watch?v=6TMPWvPG5GA" target="_blank" rel="noopener noreferrer">Please stop vibe coding like this - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250902230358413" src="/assets/images/image-20250902230358413-895091fde819f613124032a7c28bd429.png" width="1364" height="726"></p><ol><li><strong>Know the craft; do not let tools outrun skill.</strong></li><li><strong>Use vibe coding for throwaway and legacy work, not for core craftsmanship.</strong></li><li><strong>Name the mode: agentic coding vs vibe coding, and pick deliberately.</strong></li><li><strong>Prefer small local code over extra dependencies when the task is tiny.</strong></li><li><strong>Use AI to replace low-value engineering, not engineers.</strong></li></ol><p><strong><em>&quot;You still need to know how code works if you want to be a coder.&quot;</em></strong>
I keep the <strong>skill floor</strong> high. If I feel the tool exceeding my understanding, I stop, turn off the agent, and read. I ask chat to teach, not to substitute thinking. I refuse the comfort of not knowing because <strong>comfort in ignorance</strong> is corrosive. If the tool is better than me at the task, I train until that is no longer true, then use the tool as a multiplier rather than a crutch.</p><p><strong><em>&quot;The majority of code we write is throwaway code.&quot;</em></strong>
I point vibe coding at <strong>disposable work</strong>: scripts, scaffolding, glue, UI boilerplate, exploratory benchmarks. I optimize for speed, learning, and deletion, not polish. Good code solves the right problem and does not suck to read; here I bias the first trait and accept that readability is optional when the artifact is destined to be forgotten. I ship, test the idea, and freely discard because <strong>throwing it away never hurts</strong>.</p><p><strong><em>&quot;Agentic coding is using prompts that use tools to then generate code. Vibe coding is when you don&#x27;t read the code after.&quot;</em></strong>
I <strong>name the mode</strong> so I do not confuse capabilities with habits. Agentic flows can plan edits across a repo; vibe coding is a behavior choice to stop reading and just prompt. If I neither know nor read the code, I am stuck. If I know the code and sometimes choose not to read it for low-stakes tasks, I am fast. Clear terms prevent hype and let me pick the right tool for the job.</p><p><strong><em>&quot;You cant be mad at vibe coding and be mad at left-pad.&quot;</em></strong>
For tiny problems, I keep <strong>ownership</strong> by generating a few lines locally instead of importing yet another dependency with alien opinions. When a package bites, patching generated local code is easier than vendoring the world. Vibe coding solves the same pain that excessive deps create, but without surrendering control of the codebase.</p><p><strong><em>&quot;Vibe coding isn&#x27;t about replacing engineers. Its about replacing engineering.&quot;</em></strong>
I aim AI at the <strong>low-value engineering</strong> I never wanted to do: a quick SVG-&gt;PNG converter in the browser, a square image maker for YouTube previews, lightweight benchmarking harnesses. These are small, tailor-made tools that unlock output with near-zero ceremony. Experts remain essential for the hard parts; AI just clears the gravel so we can climb.</p></blockquote><p>2025-08-30 <a href="https://www.youtube.com/watch?v=i2juiR8Xvk0" target="_blank" rel="noopener noreferrer">Burnout from the Top – A Story of Falling, Learning, and Rising Again - Tom Erik Rozmara Frydenlund - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p>burnout, leadership, mental health, recovery, resilience, psychological safety, work culture, boundaries, calendar management<img alt="image-20250830161310226" src="/assets/images/image-20250830161310226-27bb47f5506a2b6e2e5e697103d43bef.png" width="1333" height="692"></p><p><img alt="image-20250830161514640" src="/assets/images/image-20250830161514640-a5ef5866cc2bd24b1f036c43d2b1fb0c.png" width="904" height="512"></p><p>I used to treat leadership like armor. Stand in front. Be strong. Say yes. Keep moving. Then my own body called time. One night my heart raced past 220. The doctor said drive in. The nurse called an ambulance. It was not a heart attack, but it was close enough to stop me. That was the day I learned burnout is an invisible injury. You look fine. You are not.</p><p>The signs were there for weeks. I stopped sleeping. I lost motivation. My focus frayed. I snapped at home. I withdrew. My personality shifted. People saw the change before I did. If you notice this in yourself or in a colleague, ask the simple question: are you OK. That question can be the lifeline.</p><p>The causes were obvious in hindsight. Too much work, all channels open, phone always on. Unclear expectations I filled with extra effort. A culture that prized speed over quality. Isolation. Perfectionism. I tried to deliver 100 percent on everything. That is expensive in hours and in health. Ask what is good enough. Leave room to breathe.</p><p>Recovery was not heroic. It was slow and dull and necessary. I accepted that I was sick even if no one could see it. I told people. That made everyday life less awkward and it cut the shame. My days became simple: wake, breakfast, long walk, read, sleep, repeat. Minus 20 or pouring rain, I walked. Some days I felt strong and tried to do too much. The next day I crashed. I learned to pace. Think Amundsen, not Scott. Prepare. March the same distance in bad weather and good. Quality every day beats bursts and collapses.</p><p>Talking helped. Family, colleagues, a professional if you need it. Do not keep it inside. Burnout is now a described syndrome of unmanaged work stress. You are not unique in this, and that is a relief. The earlier you talk, the earlier you can turn. There are stages. I hit the last one. You do not need to.</p><p>Returning to work took time. Six months from ambulance to office. Do not sprint back. Start part time. Expect bumps. Leaders must make space for this. Do not load the diesel engine on a frozen morning. Warm it first. If you lead, build a ramp, not a wall.</p><p>I changed how I use time. I own my calendar. I block focus time before other people fill my week. I add buffers between meetings. I add travel time. I prepare on purpose. I ask why I am needed. I ask what is expected. If there is no answer, I decline. I say no when I am tired or when I will not add value. I reschedule when urgency is fake. Many meetings become an email or a short call when you ask the right question.</p><p>I changed how I care for the basics. I set realistic goals. I move every day. Long walks feed the brain. I go to bed on time. I protect rest. I learned to say no and to hold the line. I built places to recharge. For me it is a cabin and a fire. Quiet. Books. Music. You find your own battery and you guard it.</p><p>I changed how I lead. Psychological safety is not a slide. It is daily behavior. We build trust. We keep confidences. We invite dissent and keep respect. We cheer good work and we say the missing word: thank you. Recognition costs little and pays back a culture where people speak up before they break. I aim for long term quality over quick gains. The 20 mile march beats the sprint for the next quarter. Greatness is choice and discipline, not luck.</p><p>I dropped the mask. Pretending to be superhuman drains energy you need for the real work. I am the same person at home and at work. I can be personal. I can admit fear. I can cry. That honesty gives others permission to be human too. It also prevents the slow leak of acting all day.</p><p>On motivation, I look small and near. You do not need fireworks every morning. You need a reason. Clean dishes. A solved bug. A customer who can sleep because the system is stable. Ask why. Ask it again. Clear purpose turns effort into progress. When the honeymoon buzz fades, purpose stays.</p><p>If you are early on this path, take these moves now. Notice the signs. Talk sooner. Cut the always-on loop. Define good enough. Pace like Amundsen. If you are coming back, ramp slowly and let others help. If you lead, design conditions for health: time to think, time to rest, time to do quality work. Own the calendar. Guard the buffers. Reward preparation. Thank people. And remember the simplest goal. Wake up. You are here. Build from there.</p></blockquote><p>2025-08-10 <a href="https://www.youtube.com/watch?v=i44jQvcDARo" target="_blank" rel="noopener noreferrer">You&#x27;re using AI coding tools wrong - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250810150835021" src="/assets/images/image-20250810150835021-16a1a3c16ed0a013eb1934bfaa0ce5a6.png" width="1367" height="733">
<strong>Key Takeaways – The Real Bottleneck in Software Development (and How AI Should Actually Help)</strong></p><ul><li><strong>Writing code was never the bottleneck</strong> – Shipping slow isn’t because typing is slow. Code reviews, testing, debugging, knowledge transfer, coordination, and decision-making are the real pace-setters.</li><li><strong>Processes kill speed when misused</strong> – Long specs, excessive meetings, and rigid “research → design → spec → build → ship” flows often lock in bad assumptions before real user feedback happens.</li><li><strong>Prototype early, prototype often</strong> – Fast, rough builds are a cheap way to learn if an idea is worth pursuing. The goal is insight, not production-grade quality at first.</li><li><strong>Optimize for “time to next realization”</strong> – The fastest path from assumption to new learning wins. Use prototypes to expose wrong assumptions before investing heavily.</li><li><strong>Throwaway code vs. production code</strong> – Treat them differently. Throwaway code is for learning, experiments, and iteration; production code is for maintainability and scale. Confusing the two makes AI tools look worse than they are.</li><li><strong>AI’s best use is speeding up iteration, not replacing devs</strong> – Let AI help create quick prototypes, test tech approaches, and refine concepts. Don’t just use it to auto-generate bloated specs or production code you don’t understand.</li><li><strong>Bad specs cost more than slow typing</strong> – If research and design start from faulty assumptions, all the downstream work is wasted. Prototypes fix this by providing a working reference early.</li><li><strong>Smaller teams + working prototypes = better communication</strong> – Three people iterating on a small demo is more effective than 20 people debating a massive spec.</li><li><strong>Culture shift needed</strong> – Many engineers and PMs resist prototypes, clinging to big upfront design. This causes conflict when AI makes rapid prototyping possible.</li><li><strong>Fun matters</strong> – Iterating on ideas with quick feedback loops is engaging. Endless Jira tickets and reviewing AI-generated slop are not.</li><li><strong>Main warning</strong> – If AI tools only make it easier to produce large amounts of code without improving understanding, you slow down the real bottleneck: team alignment and decision-making.</li></ul><p><strong>Source article:</strong></p><p>2025-08-10 <a href="https://ordep.dev/posts/writing-code-was-never-the-bottleneck" target="_blank" rel="noopener noreferrer">Writing Code Was Never The Bottleneck - ordep.dev</a> { ordep.dev }</p><blockquote><p>The actual bottlenecks were, and still are, </p><ul><li><strong>🖥️🔍 code reviews</strong>, </li><li><strong>📚🤝 knowledge transfer</strong> through mentoring and pairing, </li><li><strong>🧪✅ testing</strong>, </li><li><strong>🔎🐛 debugging</strong>, and </li><li>the human overhead of <strong>📅🗣️🤝 coordination and communication</strong>. </li></ul><p>All of this wrapped inside the labyrinth of tickets, planning meetings, and agile rituals.</p></blockquote><p><img alt="image-20250810150922779" src="/assets/images/image-20250810150922779-a279ef0137049049cc76d9908aaeb85e.png" width="1094" height="806"></p></blockquote><p>2025-09-17 <a href="https://www.youtube.com/watch?v=SvcRvolP2NE" target="_blank" rel="noopener noreferrer">10 Things I Do On Every .NET App - Scott Sauber - NDC Oslo 2025 - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250916224718622" src="/assets/images/image-20250916224718622-f421c8a216bb9da18971e441a6a62385.png" width="1350" height="742"></p></blockquote><p><strong>1. Organize by feature folders, not by technical layer</strong>
Group controllers, views, view models, client assets, and tests by feature to increase cohesion and make adding or removing a feature localized. This applies equally to MVC, Razor Pages, Blazor, and React front ends.</p><p>Code sketch:</p><div class="codeBlockContainer_aLwb language-text theme-code-block"><div class="codeBlockContent_INfL text"><pre tabindex="0" class="prism-code language-text codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">/Features</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  /MyProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyProfileController.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyProfileViewModel.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Index.cshtml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index.css</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index.tsx  // if co-locating SPA bits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyProfile.tests.cs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/slice-your-app?view=aspnetcore-9.0" target="_blank" rel="noopener noreferrer">Feature Slices for ASP.NET Core</a></p><hr><p><strong>2. Treat warnings as errors</strong>
Fail the build on warnings to keep the codebase clean from day 1. Prefer project-wide MSBuild setting. For full coverage across tasks, also use the CLI switch.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-xml theme-code-block"><div class="codeBlockContent_INfL xml"><pre tabindex="0" class="prism-code language-xml codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- .csproj --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PropertyGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">TreatWarningsAsErrors</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">TreatWarningsAsErrors</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">PropertyGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>CLI:</p><div class="codeBlockContainer_aLwb language-bash theme-code-block"><div class="codeBlockContent_INfL bash"><pre tabindex="0" class="prism-code language-bash codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet build -warnaserror</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/visualstudio/msbuild/warnings-as-errors?view=vs-2022" target="_blank" rel="noopener noreferrer">MSBuild TreatWarningsAsErrors property</a></p><hr><p><strong>3. Prefer structured logging with Serilog via ILogger, enrich with context</strong>
Use structured properties rather than string concatenation, enrich logs with correlation id, user id, request url, version, etc. Always program against ILogger and configure Serilog only in bootstrap.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">// Program.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Log.Logger = new LoggerConfiguration()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .Enrich.FromLogContext()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .WriteTo.Console()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .CreateLogger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.Host.UseSerilog((ctx, lc) =&gt; lc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ReadFrom.Configuration(ctx.Configuration));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// In a handler/service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Task Handle(Guid userId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _logger.LogInformation(&quot;Retrieving user {@UserId}&quot;, userId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Task.CompletedTask;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://serilog.net/" target="_blank" rel="noopener noreferrer">Serilog Documentation</a></p><hr><p><strong>4. Distinguish logs vs metrics vs audits; store audits in your primary data store</strong>
Keep developer-focused logs separate from business metrics; store audit trails where loss is unacceptable in your transactional store, not only in logs. Security and compliance often require retention beyond default log windows.</p><hr><p><strong>5. Secure by default with a global fallback authorization policy</strong>
Make endpoints require authentication unless explicitly opted out by AllowAnonymous or a policy override.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">// Program.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.Services.AddAuthorization(options =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    options.FallbackPolicy = new AuthorizationPolicyBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .RequireAuthenticatedUser()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .Build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authorization/policies?view=aspnetcore-9.0" target="_blank" rel="noopener noreferrer">ASP.NET Core Authorization Policies</a></p><hr><p><strong>6. Prefer FluentValidation over data annotations for complex rules</strong>
FluentValidation offers readable, testable rules and rich composition.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class RegisterModelValidator : AbstractValidator&lt;RegisterModel&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RegisterModelValidator()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(x =&gt; x.Email).NotEmpty().EmailAddress();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(x =&gt; x.Password).NotEmpty().MinimumLength(12);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        RuleFor(x =&gt; x.BirthDate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .Must(d =&gt; d &lt;= DateOnly.FromDateTime(DateTime.UtcNow).AddYears(-18))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .WithMessage(&quot;Must be 18+&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://docs.fluentvalidation.net/en/latest/" target="_blank" rel="noopener noreferrer">FluentValidation for .NET</a></p><hr><p><strong>7. Remove the Server header from Kestrel</strong>
Avoid advertising your stack to scanners by disabling the Kestrel Server response header.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">// Program.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.WebHost.ConfigureKestrel(o =&gt; o.AddServerHeader = false);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/servers/kestrel/options?view=aspnetcore-9.0" target="_blank" rel="noopener noreferrer">Kestrel Web Server in ASP.NET Core</a></p><hr><p><strong>8. Inject options as a POCO by registering the Value</strong>
Keep Options pattern at the edges and inject your settings class directly to consumers by registering the bound value; use IOptionsSnapshot when settings can change per request.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">// Program.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.Services.Configure&lt;MyAppSettings&gt;(builder.Configuration.GetSection(&quot;MyApp&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder.Services.AddSingleton(sp =&gt; sp.GetRequiredService&lt;IOptions&lt;MyAppSettings&gt;&gt;().Value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Consumer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public sealed class WidgetService(MyAppSettings settings) { ... }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/options?view=aspnetcore-9.0" target="_blank" rel="noopener noreferrer">Options pattern in ASP.NET Core</a></p><hr><p><strong>9. Favor early returns and keep the happy path at the end</strong>
Minimize nesting, return early for error and guard cases, and let the successful flow be visible at the bottom of a method for readability.</p><hr><p><strong>10. Adopt the new XML solution format .slnx</strong>
The new .slnx format is human-readable XML, reduces merge conflicts, and is supported by the dotnet CLI and Visual Studio.</p><p>CLI:</p><div class="codeBlockContainer_aLwb language-bash theme-code-block"><div class="codeBlockContent_INfL bash"><pre tabindex="0" class="prism-code language-bash codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet sln migrate MySolution.sln</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># produces MySolution.slnx</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://devblogs.microsoft.com/dotnet/solution-file-modernization/" target="_blank" rel="noopener noreferrer">Modern .slnx solution format</a></p><hr><p><strong>11. Add HTTP security headers</strong>
Enable CSP, X-Frame-Options, Referrer-Policy, Permissions-Policy, etc., or use a helper package with sane defaults. Test with <a href="https://securityheaders.com/" target="_blank" rel="noopener noreferrer">securityheaders.com</a>.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">// Using NetEscapades.AspNetCore.SecurityHeaders</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app.UseSecurityHeaders(policies =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    policies.AddDefaultSecurityHeaders()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .AddContentSecurityPolicy(b =&gt; b.BlockAllMixedContent()));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://github.com/andrewlock/NetEscapades.AspNetCore.SecurityHeaders" target="_blank" rel="noopener noreferrer">NetEscapades.AspNetCore.SecurityHeaders</a></p><hr><p><strong>12. Build once, deploy many; prefer trunk-based development</strong>
Use a single long-lived main branch, short-lived feature branches, and promote the same build artifact through environments.</p><p>Reference: <a href="https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development" target="_blank" rel="noopener noreferrer">Atlassian Gitflow vs Trunk-based development</a></p><hr><p><strong>13. Validate your DI container on startup</strong>
Enable ValidateOnBuild and ValidateScopes to catch captive dependencies and lifetime errors during startup.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-csharp theme-code-block"><div class="codeBlockContent_INfL csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token plain">builder.Host.UseDefaultServiceProvider(o =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    o.ValidateScopes = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    o.ValidateOnBuild = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/dependency-injection#default-service-provider" target="_blank" rel="noopener noreferrer">.NET Generic Host Service Provider</a></p><hr><p><strong>14. Write automated tests; prefer xUnit, upgrade to v3</strong>
Automated tests improve speed and reliability. xUnit v3 is current and supports the new Microsoft testing platform.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-xml theme-code-block"><div class="codeBlockContent_INfL xml"><pre tabindex="0" class="prism-code language-xml codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Test.csproj --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageReference</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">xunit.v3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageReference</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">xunit.runner.visualstudio</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">3.*</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PropertyGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">UseMicrosoftTestingPlatformRunner</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">UseMicrosoftTestingPlatformRunner</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">PropertyGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://xunit.net/" target="_blank" rel="noopener noreferrer">xUnit.net v3</a></p><hr><p><strong>15. Use Central Package Management</strong>
Keep package versions in Directory.Packages.props to synchronize versions across projects.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-xml theme-code-block"><div class="codeBlockContent_INfL xml"><pre tabindex="0" class="prism-code language-xml codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Directory.Packages.props --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageVersion</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">xunit.v3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1.0.1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageVersion</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Serilog.AspNetCore</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Version</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">8.0.0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Project</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- In .csproj files --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageReference</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">xunit.v3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">PackageReference</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Include</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Serilog.AspNetCore</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">ItemGroup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/nuget/consume-packages/Central-Package-Management" target="_blank" rel="noopener noreferrer">Central Package Management in .NET</a></p><hr><p><strong>16. Log EF Core SQL locally by raising the EF category to Information</strong>
Enable Microsoft.EntityFrameworkCore.Database.Command at Information to see executed SQL. Use only for development.</p><p>Code:</p><div class="codeBlockContainer_aLwb language-json theme-code-block"><div class="codeBlockContent_INfL json"><pre tabindex="0" class="prism-code language-json codeBlock_HyjA thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_v42P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// appsettings.Development.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Logging&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;LogLevel&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Microsoft.EntityFrameworkCore.Database.Command&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Information&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_n_1r clean-btn">Copy</button></div></div><p>Reference: <a href="https://learn.microsoft.com/en-us/ef/core/logging-events-diagnostics/simple-logging" target="_blank" rel="noopener noreferrer">EF Core Logging and Events</a></p><hr><p><strong>17. CI/CD and continuous deployment with feature toggles; ship in small batches</strong>
Aim for pipelines that deploy green builds to production; replace manual checks with automated tests; use feature flags to keep unfinished work dark.</p><p>Reference: <a href="https://dora.dev/capabilities/trunk-based-development/" target="_blank" rel="noopener noreferrer">DORA: Trunk-Based Development</a></p><p>2025-09-28 <a href="https://www.youtube.com/watch?v=lLv1s7rKeCM" target="_blank" rel="noopener noreferrer">Programming in Modern C with a Sneak Peek into C23 - Dawid Zalewski - ACCU 2023 - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250928150824455" src="/assets/images/image-20250928150824455-81d64f12e73b9510dc045f0012f95ac9.png" width="1396" height="741"></p><hr><p>A high-level tour of <em>Programming in Modern C with a Sneak Peek into C23</em>  (by Dawid Zalewski) shows how C remains alive and evolving. The talk focuses on practical, post-C99 techniques, especially useful in systems and embedded work. It demonstrates idioms that improve clarity, safety, and ergonomics without giving up low-level control.</p><p><strong>Topics covered</strong></p><p><strong>Modern initialization</strong>
Brace and designated initializers, empty initialization <code>{}</code> in C23, and mixed positional and designated forms.</p><p><strong>Arrays</strong>
Array designators, rules for inferred array size, and guidance on when to avoid variable-length arrays as storage while still using VLA syntax to declare function parameter bounds.</p><p><strong>Pointer and API contracts</strong>
Sized array parameters <code>T a[n]</code>, <code>static</code> qualifiers like <code>T a[static 3]</code> to require valid elements, and <code>const char *static 1</code> to enforce non-null strings.</p><p><strong>Multidimensional data</strong>
Strongly typed pointers to VLA-shaped arrays for natural <code>a[i][j]</code> indexing and safer <code>sizeof</code> expressions.</p><p><strong>Compound literals</strong>
Creating unnamed lvalues to reassign structs, pass inline structs to functions, and zero objects succinctly.</p><p><strong>Macro patterns</strong>
Named-argument style wrappers around compound literals, simple defaults, <code>_Generic</code> for ad-hoc overloading by type, and a macro trick for argument-count dispatch.</p><p><strong>Memory layout</strong>
Flexible array members for allocating a header plus payload in one contiguous block, reducing double-allocation pitfalls.</p><p><strong>C23 highlights</strong>
New keywords for <code>bool</code>, <code>true</code>, and <code>false</code>, the <code>nullptr</code> constant, <code>auto</code> type inference in specific contexts, a note on <code>constexpr</code>, and current compiler support caveats.</p></blockquote><p>2025-09-27 <a href="https://www.youtube.com/watch?v=eAhWIO1Ra6M" target="_blank" rel="noopener noreferrer">Advice for Writing Small Programs in C - YouTube</a> { <a href="http://www.youtube.com" target="_blank" rel="noopener noreferrer">www.youtube.com</a> }</p><blockquote><p><img alt="image-20250927123639285" src="/assets/images/image-20250927123639285-a6d61e748c139dc5da4a4c53ec8f2b60.png" width="1395" height="814">Main point</p><ul><li>I spend my time writing code that gets real work done, and I rely on aggressive code reuse. In C that means I bring a better replacement for the C standard library to the party.</li></ul><p>Key advice for writing C</p><ul><li>Build your own reusable toolkit. My answer was stb: single-file, public-domain utilities that replace weak parts of libc.</li><li>Use dynamic arrays and treat them like vectors. I use macros so that arr<!-- -->[i]<!-- --> works and capacity/length live in bytes before the pointer.</li><li>Prefer hash tables and dynamic arrays by default. They make small programs both simpler and usually faster.</li><li>Be pragmatic with the C standard library. Use printf, malloc, free, qsort; avoid footguns like gets and be careful with strncpy and realloc.</li><li>Handle realloc safely. Assign to a temp pointer first, then swap it back if allocation succeeds.</li><li>Do not cache dynamic array lengths. It is a source of bugs when the array grows or shrinks.</li><li>Accept small inefficiencies if they improve iteration speed. Optimize only when it affects the edit-run loop or output.</li></ul><p>Workflow and productivity</p><ul><li>Remove setup friction. I keep a single quick.c workspace I can open, type, build, and run immediately.</li><li>Automate the boring steps. I have a one-command install that copies today’s build into my bin directory.</li><li>Write tiny, disposable tools. 5 to 120 minute utilities solve real problems now and often get reused later.</li><li>Favor tools that make easy things easy. Avoid frameworks that only make complicated things possible but make simple things tedious.</li><li>Keep programs single-file when you can. Deployment matters for speed and reuse.</li></ul><p>Code reuse and licensing philosophy</p><ul><li>Make reuse non-negotiable. I do not want to rewrite the same helper twice.</li><li>Ship as single-header libraries and make them easy to drop in. Easy to deploy, easy to use, easy to license.</li><li>Public domain licensing removes friction for future me and everyone else.</li></ul><p>Language and ecosystem perspective</p><ul><li>C can be great for small programs if you fix the library problem and streamline your workflow.</li><li>Conciseness matters. Shorter code usually means faster writing and iteration.</li><li>I choose C over dynamic languages for these tasks because my toolkit gives me comparable concision with better control.</li></ul><p>API and library design principles</p><ul><li>Simple, focused APIs with minimal surface area.</li><li>Make the common path trivial. Optional flexibility is fine, but do not tax the simple case.</li><li>Prefer data and functions over deep hierarchies or heavy abstractions.</li></ul></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2025/08/31/links-from-my-inbox"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Links from my inbox 2025-08-31</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_VRyP thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-nice-watch" class="table-of-contents__link toc-highlight">⌚ Nice watch!</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Wiki</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Disclaimer: The content on this website is my personal work and reflects my own views and opinions. 
            It is not associated with or endorsed by any of my past, current, or future employers. This site contains links to external websites and compiled pages from various sources. 
            I do not claim any rights or responsibility for the content of these external materials. 
            All content is provided "AS IS" without any guarantees or warranties.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e9d5ee50.js"></script>
<script src="/assets/js/main.413c250e.js"></script>
</body>
</html>